# Mock 数据生成脚本

## 功能说明

`generate_mock_data.py` 脚本用于生成测试用的mock数据，包括：

- **30个随机学生账号**
  - 随机中文姓名
  - 自动生成学号（格式：BYXXXXXXXX）
  - 自动生成邮箱和手机号
  - 统一密码：`123456`

- **3个管理员账号**
  - admin001 / admin123
  - admin002 / admin123
  - admin003 / admin123

- **20个随机设备**
  - 包括吉他、键盘、鼓、贝斯、音箱、效果器、麦克风、调音台等
  - 随机分配所有者
  - 60%概率设为共享设备
  - 随机分配到不同校区和位置

- **随机预约记录**
  - 未来14天的随机预约（每个校区20-40个）
  - 自动避免时间冲突
  - 部分预约已取钥匙
  - 智能避开午餐和晚餐时间（70%概率）

- **设备借用记录**
  - 10-20条借用记录
  - 50%已归还，50%借用中

- **不可预约时间规则**
  - 午餐时间：12:00-13:00
  - 晚餐时间：18:00-19:00
  - 部分校区周一上午维护时间

## 使用方法

### 1. 确保后端环境已配置

```bash
cd backend
source venv/bin/activate  # 激活虚拟环境
```

### 2. 运行脚本

```bash
python test/generate_mock_data.py
```

### 3. 查看结果

脚本会清空现有数据并生成新的mock数据，完成后会显示统计信息：

```
==============================================================
Mock数据生成完成！
==============================================================

用户账号:
  - 管理员: 3 个
  - 学生: 30 个

设备:
  - 总数: 20 个

预约:
  - 总数: XX 个

借用记录:
  - 总数: XX 个

登录信息:
  管理员账号: admin001 / admin123
  学生账号示例: BY24XXXXXXXX / 123456
==============================================================
```

## 测试账号

### 管理员账号
- 账号：`admin001` / 密码：`admin123`
- 账号：`admin002` / 密码：`admin123`
- 账号：`admin003` / 密码：`admin123`

### 学生账号
- 所有学生账号密码统一为：`123456`
- 学号格式：`BY24XXXXXXXX`（脚本会随机生成）

## 注意事项

⚠️ **警告**：此脚本会清空数据库中的所有数据（除校区外），仅用于开发和测试环境！

## 数据特点

1. **真实性**：
   - 使用真实的中文姓名
   - 符合实际的学号格式
   - 合理的设备类型和品牌

2. **多样性**：
   - 随机分布在不同校区
   - 不同的预约时间段
   - 不同的设备类型和共享状态

3. **关联性**：
   - 预约关联到真实用户
   - 设备关联到所有者
   - 借用记录关联到设备

4. **时间线**：
   - 预约覆盖未来14天
   - 部分历史借用记录
   - 合理的钥匙领取时间

## 自定义配置

可以在脚本中修改以下参数：

```python
# 学生数量
students = create_students(30)  # 修改数字

# 设备数量
equipment_list = create_equipment(students, campuses, 20)  # 修改数字

# 预约时间范围
reservations = create_reservations(students, campuses, days_range=14)  # 修改天数

# 借用记录数量
borrow_count = random.randint(10, 20)  # 修改范围
```

## 问题排查

如果遇到错误，请检查：

1. 是否在backend目录下运行
2. 是否激活了虚拟环境
3. 数据库文件是否存在访问权限
4. Flask应用是否正确配置

## 重新生成数据

可以多次运行此脚本，每次都会清空并重新生成全新的随机数据。
