<view class="container">
  <view class="tabs">
    <view 
      class="tab-item {{activeTab === 'active' ? 'active' : ''}}"
      bindtap="switchTab"
      data-tab="active"
    >
      当前预约
    </view>
    <view 
      class="tab-item {{activeTab === 'history' ? 'active' : ''}}"
      bindtap="switchTab"
      data-tab="history"
    >
      历史记录
    </view>
  </view>

  <view class="reservation-list">
    <view wx:for="{{displayList}}" wx:key="_id" class="res-card card">
      <view class="res-header">
        <text class="res-date">{{ item.date }}</text>
        <text class="res-status {{item.statusClass}}">{{ item.statusText }}</text>
      </view>
      
      <view class="res-body">
        <view class="res-row">
          <text class="label">时间段:</text>
          <text class="value">{{ item.start_hour }}:00 - {{ item.end_hour }}:00</text>
        </view>
        <view class="res-row">
          <text class="label">校区:</text>
          <text class="value">{{ item.campus_name || '未知校区' }}</text>
        </view>
      </view>

      <view class="res-footer" wx:if="{{activeTab === 'active' && item.status === 'active'}}">
        <button class="btn-cancel" size="mini" bindtap="cancelReservation" data-item="{{item}}">取消预约</button>
      </view>
    </view>

    <view wx:if="{{displayList.length === 0}}" class="empty-state">
      <text>暂无记录</text>
    </view>
  </view>
</view>
